<script>
(function (self) {
	var the_screen =	function (opts) {
							return opts .screen;
						};
	var the_tag =	function (opts) {
						return opts .tag;
					};
	var screen_how =	function (opts) {
							if (opts .how)
								return [opts .how];
							
							var object = without ('tag') (without ('screen') (opts));
							for (var key of Object .keys (object)) {
								var value = object [key];
								delete object [key];
								
								var parts = key .split ('__');
								var anchor = object;
								for (var part of parts .slice (0, -1)) {
									if (! anchor [part])
										anchor [part] = {};
									anchor = anchor [part];
								}
								anchor [parts .reverse () [0]] = value;
							}
							
							if (object .length)
								object = [] .slice .call (object);
							else
								object = [object];
							
							return object;
						};
	
	screens .add_as (the_screen (opts)) .apply (null, [the_tag (opts)] .concat (screen_how (opts)));
})(this);
</script>
